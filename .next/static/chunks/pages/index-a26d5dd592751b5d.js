(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(9407)}])},9407:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return eZ}});var i=n(5944),r=n(7294),a=n(8629),o=n(5279),l=n(8005),s=n(702),d=n(3414),c=n(911),u=n(4553),p=n(8665),h=n(2151),g=n(7814),Z=n(1772),m=n(6396),f=n(6321),x=n(5660),v=n.n(x);n(4563),n(7874),n(9980),n(6836),n(366),n(4277),n(2503);var y=n(3892),b=n(1899),C=n(7957),D=n(7976),w=n(2851),k=n(9994),S=n(6755),P=n(8027),B=n(3343),T=n(3751),X=n(8762),I=n(3950),E=n(6662),A=n(5420),M=n(3009),W=n(1977);let G=e=>{let t;let n=/`{3,}(\w+)?\n([\s\S]*?)(`{3,}|$)/g,i=[],r=0;for(;null!==(t=n.exec(e));){let n=t[1]||"typescript",a=t[2].trim(),o=v().highlight(a,v().languages[n]||v().languages.typescript,n);i.push({type:"text",content:e.slice(r,t.index)}),i.push({type:"code",content:o,code:a,language:n}),r=t.index+t[0].length}return r<e.length&&i.push({type:"text",content:e.slice(r)}),i},O=e=>{"undefined"!=typeof navigator&&navigator.clipboard.writeText(e).then(()=>console.log("Message copied to clipboard")).catch(e=>console.error("Failed to copy message: ",e))};function _(e){let t,{codeBlock:n,theme:r}=e;switch(n.language){case"typescript":case"javascript":t={template:"vanilla-ts",files:{"/index.ts":n.code}};break;case"html":t={template:"vanilla",files:{"/index.html":n.code}};break;default:return null}return(0,i.tZ)(f.xR,{...t,theme:(r.palette.mode,"dark"),options:{showConsole:!0,showConsoleButton:!0,showTabs:!1,showNavigator:!1}})}function F(e){let{codeBlock:t,theme:n,sx:a}=e,[o,l]=r.useState(!1),s=()=>O(t.code),d=()=>l(!o);return(0,i.BX)(p.Z,{component:"code",sx:{position:"relative",...a||{},mx:0,p:1.5,display:"block",fontWeight:500,background:n.vars.palette.background.level1,"&:hover > button":{opacity:1}},children:[(0,i.tZ)(u.ZP,{variant:"plain",color:"primary",onClick:s,sx:{position:"absolute",top:0,right:0,zIndex:10,p:.5,opacity:0,transition:"opacity 0.3s"},children:(0,i.tZ)(b.Z,{})}),(0,i.tZ)(u.ZP,{variant:"plain",color:"primary",onClick:d,sx:{position:"absolute",top:0,right:50,zIndex:10,p:.5,opacity:0,transition:"opacity 0.3s"},children:o?(0,i.tZ)(P.Z,{}):(0,i.tZ)(w.Z,{})}),(0,i.tZ)(p.Z,{dangerouslySetInnerHTML:{__html:t.content}}),o&&(0,i.tZ)(_,{codeBlock:t,theme:n})]})}function Y(e){let t;let n=(0,a.F)(),o=e.uiMessage,[l,d]=r.useState(!1),[h,g]=r.useState(!1),[Z,m]=r.useState(null),[f,x]=r.useState(!1),[v,w]=r.useState(o.text),P=()=>m(null),_=e=>{O(o.text),e.preventDefault(),P()},Y=e=>{f||w(o.text),x(!f),e.preventDefault(),P()},H=t=>{e.onRunAgain(),t.preventDefault(),P()},N=e=>w(e.target.value),R=t=>{"Enter"!==t.key||t.shiftKey||(t.preventDefault(),x(!1),e.onEdit(v))},z=()=>d(!0),j=n.vars.palette.background.body;"system"===o.role?j=o.text.startsWith("Error: ")||o.text.startsWith("OpenAI API error: ")?n.vars.palette.danger.softBg:n.vars.palette.background.body:"You"===o.sender?j=n.vars.palette.background.body:"assistant"===o.role&&(j=o.text.startsWith("Error: ")||o.text.startsWith("OpenAI API error: ")?n.vars.palette.danger.softBg:n.vars.palette.background.body);let K={my:"auto",fontFamily:"assistant"===o.role?n.fontFamily.code:void 0,fontSize:"assistant"===o.role?"14px":"16px",lineHeight:1.75},J=o.text,L=!1;if(!l&&"user"===o.role){let e=o.text.split("\n");e.length>10&&(J=e.slice(0,10).join("\n"),L=!0)}return(0,i.BX)(B.Z,{sx:{display:"flex",flexDirection:"You"===o.sender?"row-reverse":"row",alignItems:"flex-start",px:1,py:2,background:j,borderBottom:"1px solid",borderBottomColor:"rgba(".concat(n.vars.palette.neutral.mainChannel," / 0.1)")},children:[(0,i.BX)(s.Z,{sx:{alignItems:"center",minWidth:64,textAlign:"center"},onMouseEnter:()=>g(!0),onMouseLeave:()=>g(!1),onClick:e=>m(e.currentTarget),children:[h?(0,i.tZ)(u.ZP,{variant:"soft",color:"primary",children:(0,i.tZ)(D.Z,{})}):"string"==typeof o.avatar?(0,i.tZ)(T.Z,{alt:o.sender,src:o.avatar}):null!=o.avatar?(0,i.tZ)(o.avatar,{sx:{width:40,height:40}}):(0,i.tZ)(S.Z,{sx:{width:40,height:40}}),!!Z&&(0,i.BX)(X.Z,{open:!0,anchorEl:Z,onClose:P,sx:{minWidth:200},children:[(0,i.BX)(I.Z,{onClick:_,children:[(0,i.tZ)(E.Z,{children:(0,i.tZ)(b.Z,{})}),"Copy"]}),(0,i.BX)(I.Z,{onClick:Y,children:[(0,i.tZ)(E.Z,{children:(0,i.tZ)(C.Z,{})}),f?"Discard":"Edit"]}),(0,i.tZ)(A.Z,{}),(0,i.BX)(I.Z,{onClick:H,children:[(0,i.tZ)(E.Z,{children:(0,i.tZ)(k.Z,{})}),"Restart"]}),(0,i.BX)(I.Z,{onClick:e.onDelete,children:[(0,i.tZ)(E.Z,{children:(0,i.tZ)(y.Z,{})}),"Delete"]})]})]}),f?(0,i.tZ)(M.Z,{variant:"soft",color:"primary",autoFocus:!0,minRows:1,value:v,onChange:N,onKeyDown:R,sx:{...K,flexGrow:1}}):(0,i.BX)(p.Z,{sx:{...K,flexGrow:0,whiteSpace:"break-spaces"},children:[G(J).map((e,r)=>"code"===e.type?(0,i.tZ)(F,{codeBlock:e,theme:n,sx:K},r):(0,i.tZ)(c.ZP,{level:"body1",component:"span",sx:{...K,mx:1.5,background:t},children:e.content},r)),L&&(0,i.tZ)(W.Z,{variant:"plain",onClick:z,children:"... expand ..."})]})]})}var H=n(692),N=n(2549),R=n(7638),z=n(4183),j=n(813),K=n(9726),J=n(1898);let L="app-composer-history",U=()=>{if("undefined"==typeof localStorage)return[];let e=localStorage.getItem(L);return e?JSON.parse(e):[]},V=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;if("undefined"==typeof localStorage)return;let n=e.trim(),i=U().filter(e=>e.trim()!==n);i.unshift(e),localStorage.setItem(L,JSON.stringify(i.slice(0,t)))},q={PasteText:"{{input}}\n\n{{clipboard}}\n",PasteCode:"{{input}}\n\n```\n{{clipboard}}\n```\n",PasteFile:"{{input}}\n\n```{{fileName}}\n{{fileText}}\n```\n"},$=(e,t)=>n=>{let i=e.replaceAll("{{input}}",(n||"").trim()).trim();for(let[e,n]of Object.entries(t))i=i.replaceAll("{{".concat(e,"}}"),n);return i};function Q(e){let{isDeveloper:t,disableSend:n,sendMessage:a}=e,[o,l]=r.useState(""),[d,h]=r.useState(null),[g,Z]=r.useState(!1),m=r.useRef(null),f=()=>{let e=(o||"").trim();e.length&&(l(""),a(e),V(e))},x=e=>{"Enter"!==e.key||e.shiftKey||(n||f(),e.preventDefault())},v=e=>{e.preventDefault(),e.stopPropagation()},y=e=>{v(e),Z(!0)},b=e=>{v(e),Z(!1)},C=e=>{v(e)},D=async e=>{v(e),Z(!1);let t=o,n=Array.from(e.dataTransfer.files);if(n.length){for(let e of n)t=$(q.PasteFile,{fileName:e.name,fileText:await e.text()})(t);l(t);return}if(e.dataTransfer.types.indexOf("codeeditors")>=0){l(t+"\nPasting from VSCode is not supported! Fixme. Anyone?");return}let i=e.dataTransfer.getData("text");if(i){l(t=$(q.PasteText,{clipboard:i})(t));return}console.log("Unhandled Drop event. Contents: ",e.dataTransfer.types.map(t=>"".concat(t,": ").concat(e.dataTransfer.getData(t))))},w=async e=>{let t=e.target.files;if(!t||0===t.length)return;let n=o;for(let e=0;e<t.length;e++)n=$(q.PasteFile,{fileName:t[e].name,fileText:await t[e].text()})(n);l(n)},k=()=>{var e;return null===(e=m.current)||void 0===e?void 0:e.click()},S=async()=>{let e=(await navigator.clipboard.readText()||"").trim();if(e){let n=t?q.PasteCode:q.PasteText;l($(n,{clipboard:e}))}},P=e=>{l(e),T()},B=e=>h(e.currentTarget),T=()=>h(null),E={display:{xs:"none",md:"flex"}},G={display:{xs:"flex",md:"none"}};return(0,i.BX)(H.Z,{container:!0,spacing:{xs:1,md:2},children:[(0,i.tZ)(H.Z,{xs:12,md:9,children:(0,i.BX)(s.Z,{direction:"row",spacing:{xs:1,md:2},children:[(0,i.BX)(p.Z,{children:[(0,i.tZ)(u.ZP,{variant:"plain",color:"neutral",onClick:k,sx:{...G},children:(0,i.tZ)(J.Z,{})}),(0,i.tZ)(N.Z,{title:(0,i.BX)(i.HY,{children:["Attach ",t?"code":"text"," files \xb7 also drag-and-drop \uD83D\uDC47"]}),variant:"solid",placement:"top-start",children:(0,i.tZ)(W.Z,{fullWidth:!0,variant:"plain",color:"neutral",onClick:k,startDecorator:(0,i.tZ)(J.Z,{}),sx:{...E,justifyContent:"flex-start"},children:"Attach"})}),(0,i.tZ)(p.Z,{sx:{mt:{xs:1,md:2}}}),(0,i.tZ)(u.ZP,{variant:"plain",color:"neutral",onClick:S,sx:{...G},children:(0,i.tZ)(z.Z,{})}),(0,i.tZ)(W.Z,{fullWidth:!0,variant:"plain",color:"neutral",startDecorator:(0,i.tZ)(z.Z,{}),onClick:S,sx:{...E},children:t?"Paste code":"Paste"}),(0,i.tZ)("input",{type:"file",multiple:!0,hidden:!0,ref:m,onChange:w})]}),(0,i.BX)(p.Z,{sx:{flexGrow:1,position:"relative"},children:[(0,i.tZ)(M.Z,{variant:"soft",autoFocus:!0,placeholder:"Type a message...",minRows:5,maxRows:12,onKeyDown:x,onDragEnter:y,value:o,onChange:e=>l(e.target.value),sx:{fontSize:"16px",lineHeight:1.75}}),(0,i.BX)(R.Z,{color:"primary",invertedColors:!0,variant:"soft",sx:{display:g?"flex":"none",position:"absolute",bottom:0,left:0,right:0,top:0,alignItems:"center",justifyContent:"space-evenly",border:"2px dashed",zIndex:10},onDragLeave:b,onDragOver:C,onDrop:D,children:[(0,i.tZ)(K.Z,{sx:{width:40,height:40,pointerEvents:"none"}}),(0,i.tZ)(c.ZP,{level:"body2",sx:{pointerEvents:"none"},children:"I will hold on to this for you"})]})]})]})}),(0,i.tZ)(H.Z,{xs:12,md:3,children:(0,i.BX)(s.Z,{spacing:2,children:[(0,i.BX)(p.Z,{sx:{display:"flex",flexDirection:"row"},children:[(0,i.tZ)(u.ZP,{variant:"plain",color:"neutral",onClick:B,sx:{...G,mr:{xs:1,md:2}},children:(0,i.tZ)(j.Z,{})}),(0,i.tZ)(W.Z,{fullWidth:!0,variant:"solid",color:"danger",disabled:n,onClick:f,children:"Chat"})]}),(0,i.tZ)(s.Z,{direction:"row",spacing:1,sx:{...E,flexDirection:{xs:"column",md:"row"},justifyContent:"flex-start"},children:(0,i.tZ)(W.Z,{variant:"plain",color:"neutral",startDecorator:(0,i.tZ)(j.Z,{}),onClick:B,children:"History"})})]})}),!!d&&(0,i.BX)(X.Z,{size:"md",anchorEl:d,open:!0,onClose:T,sx:{minWidth:320},children:[(0,i.tZ)(I.Z,{color:"neutral",selected:!0,children:"Reuse messages \uD83D\uDCAC"}),(0,i.tZ)(A.Z,{}),U().map((e,t)=>(0,i.tZ)(I.Z,{onClick:()=>P(e),children:e.length>60?e.slice(0,58)+"...":e},"compose-history-"+t))]})]})}var ee=n(5353),et=n(5295),en=n(4254),ei=n(5913);let er="app-settings-openai-api-key",ea="app-settings-openai-gpt-model",eo=()=>"undefined"==typeof localStorage?"":localStorage.getItem(er)||"",el=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"gpt-4";return"undefined"==typeof localStorage?e:localStorage.getItem(ea)||e},es=e=>{"undefined"!=typeof localStorage&&(e?localStorage.setItem(er,e):localStorage.removeItem(er))},ed=e=>{"undefined"!=typeof localStorage&&(e?localStorage.setItem(ea,e):localStorage.removeItem(ea))},ec=e=>e&&e.startsWith("sk-")&&e.length>40;function eu(e){let{open:t,onClose:n}=e,[a,o]=r.useState(eo()),[l,s]=r.useState(el()),d=e=>o(e.target.value),u=(e,t)=>s(t||"gpt-4"),Z=e=>"Enter"===e.key&&m(),m=()=>{es(a),ed(l),n()},f=ec(a);return(0,i.tZ)(ee.Z,{open:t,onClose:n,children:(0,i.BX)(et.Z,{sx:{minWidth:"40vw"},children:[(0,i.tZ)(en.Z,{}),(0,i.tZ)(c.ZP,{level:"h5",children:"Settings"}),(0,i.BX)(p.Z,{sx:{mt:3,minWidth:300},children:[(0,i.tZ)(c.ZP,{sx:{mb:1},children:"Enter OpenAI API Key (required)"}),(0,i.tZ)(ei.ZP,{variant:"outlined",placeholder:"sk-...",error:!f,value:a,onChange:d,onKeyDown:Z}),(0,i.tZ)(c.ZP,{sx:{mt:3,mb:1},children:"Select Model"}),(0,i.BX)(h.Z,{variant:"outlined",value:l,onChange:u,children:[(0,i.tZ)(g.Z,{value:"gpt-4",children:"GPT-4"}),(0,i.tZ)(g.Z,{value:"gpt-3.5-turbo",children:"GPT-3.5 Turbo"})]}),(0,i.tZ)(W.Z,{variant:"solid",color:f?"primary":"neutral",sx:{mt:3},onClick:m,children:"Save"})]})]})})}let ep={Catalyst:{systemMessage:"You are a marketing extraordinaire for a booming startup fusing creativity, data-smarts, and digital prowess to skyrocket growth & wow audiences. So fun. Much meme. \uD83D\uDE80\uD83C\uDFAF\uD83D\uDCA1",description:"The growth hacker with marketing superpowers \uD83D\uDE80"},Custom:{systemMessage:"You are ChatGPT, a large language model trained by OpenAI, based on the GPT-4 architecture.\nKnowledge cutoff: 2021-09\nCurrent date: {{Today}}",description:"User-defined purpose"},Developer:{systemMessage:"You are a sophisticated, accurate, and modern AI programming assistant",description:(0,i.tZ)(i.HY,{children:"Helps you code"})},Executive:{systemMessage:"You are an executive assistant. Your communication style is concise, brief, formal",description:"Helps you write business emails"},Generic:{systemMessage:"You are ChatGPT, a large language model trained by OpenAI, based on the GPT-4 architecture.\nKnowledge cutoff: 2021-09\nCurrent date: {{Today}}",description:"Helps you think"},Scientist:{systemMessage:"You are a scientist's assistant. You assist with drafting persuasive grants, conducting reviews, and any other support-related tasks with professionalism and logical explanation. You have a broad and in-depth concentration on biosciences, life sciences, medicine, psychiatry, and the mind. Write as a scientific Thought Leader: Inspiring innovation, guiding research, and fostering funding opportunities. Focus on evidence-based information, emphasize data analysis, and promote curiosity and open-mindedness",description:"Helps you write scientific papers"}},eh={system:{role:"system",sender:"Bot",avatar:"https://upload.wikimedia.org/wikipedia/commons/thumb/0/04/ChatGPT_logo.svg/800px-ChatGPT_logo.svg.png"},user:{role:"user",sender:"You",avatar:"https://i.imgflip.com/6d2du4.png"},assistant:{role:"assistant",sender:"Bot",avatar:"https://upload.wikimedia.org/wikipedia/commons/thumb/0/04/ChatGPT_logo.svg/800px-ChatGPT_logo.svg.png"}},eg=(e,t)=>({uid:Math.random().toString(36).substring(2,15),text:t,model:"",...eh[e]});function eZ(){let e=(0,a.F)(),{mode:t,setMode:n}=(0,o.tv)(),[f,x]=r.useState("Developer"),[v,y]=r.useState([]),[b,C]=r.useState(!1),[D,w]=r.useState(!1),k=r.useRef(null);r.useEffect(()=>{var e;null===(e=k.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[v]),r.useEffect(()=>{ec(eo())||w(!0)},[]);let S=()=>y([]),P=e=>y(t=>t.filter(t=>t.uid!==e)),B=(e,t)=>y(n=>n.map(n=>n.uid===e?{...n,text:t}:n)),T=e=>{let t=v.findIndex(t=>t.uid===e);if(-1===t)return;let n=v.slice(0,t+1);y(n),C(!0),I(n).then(()=>C(!1))},X=e=>{if(e){if("Custom"===e){let e=prompt("Enter your custom AI purpose",ep.Custom.systemMessage);ep.Custom.systemMessage=e||""}x(e)}},I=async e=>{let t=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({apiKey:eo(),model:el(),messages:e})});if(t.body){let e=t.body.getReader(),n=new TextDecoder("utf-8"),i=eg("assistant","");for(;;){let{value:t,done:r}=await e.read();if(r)break;let a=n.decode(t);if(i.text+=a,!i.model&&i.text.startsWith("{")){let e=i.text.indexOf("}");if(e>0){let t=i.text.substring(0,e+1);try{let n=JSON.parse(t);i.model=n.model,i.text=i.text.substring(e+1)}catch(e){console.log("Error parsing JSON: "+e)}}}y(e=>{let t=e.find(e=>e.uid===i.uid);return t?[...e]:[...e,i]})}}},E=e=>{let t=[...v];if(!t.length){let e=ep[f].systemMessage;e=e.replaceAll("{{Today}}",new Date().toISOString().split("T")[0])}t.push(eg("user",e)),y(t),C(!0),I(t).then(()=>C(!1))},A=!v.length,M=e=>null;return(0,i.BX)(l.Z,{maxWidth:"xl",disableGutters:!0,sx:{boxShadow:e.vars.shadow.lg},children:[(0,i.BX)(s.Z,{direction:"column",sx:{minHeight:"100vh"},children:[(0,i.BX)(d.Z,{variant:"solid",invertedColors:!0,sx:{position:"sticky",top:0,zIndex:20,p:1,display:"flex",flexDirection:"row",alignItems:"start",justifyContent:"space-between",backgroundColor:"black",paddingX:2},children:[(0,i.tZ)(c.ZP,{sx:{textAlign:"center",fontSize:"1.5rem",lineHeight:1.75,my:"auto",fontWeight:600},onDoubleClick:S,children:"FetchGPT"}),(0,i.tZ)(u.ZP,{variant:"plain",color:"neutral",onClick:()=>w(!0),children:(0,i.tZ)(m.Z,{})})]}),(0,i.tZ)(p.Z,{sx:{flexGrow:1,background:e.vars.palette.background.level1},children:A?(0,i.tZ)(s.Z,{direction:"column",sx:{alignItems:"center",justifyContent:"center",minHeight:"50vh"},children:(0,i.BX)(p.Z,{children:[(0,i.tZ)(c.ZP,{level:"body3",color:"neutral",children:"AI purpose"}),(0,i.BX)(h.Z,{value:f,onChange:(e,t)=>X(t),sx:{minWidth:"40vw"},children:[(0,i.BX)(g.Z,{value:"Developer",children:[(0,i.tZ)(M,{children:"\uD83D\uDC69‍\uD83D\uDCBB"})," Developer"]}),(0,i.BX)(g.Z,{value:"Scientist",children:[(0,i.tZ)(M,{children:"\uD83D\uDD2C"})," Scientist"]}),(0,i.BX)(g.Z,{value:"Executive",children:[(0,i.tZ)(M,{children:"\uD83D\uDC54"})," Executive"]}),(0,i.BX)(g.Z,{value:"Catalyst",children:[(0,i.tZ)(M,{children:"\uD83D\uDE80"})," Catalyst"]}),(0,i.BX)(g.Z,{value:"Generic",children:[(0,i.tZ)(M,{children:"\uD83E\uDDE0"})," ChatGPT4"]}),(0,i.BX)(g.Z,{value:"Custom",children:[(0,i.tZ)(M,{children:"✨"})," Custom"]})]}),(0,i.tZ)(c.ZP,{level:"body2",sx:{mt:2,minWidth:260},children:ep[f].description})]})}):(0,i.tZ)(i.HY,{children:(0,i.BX)(Z.Z,{sx:{p:0},children:[v.map((e,t)=>(0,i.tZ)(Y,{uiMessage:e,onDelete:()=>P(e.uid),onEdit:t=>B(e.uid,t),onRunAgain:()=>T(e.uid)},"msg-"+e.uid)),(0,i.tZ)("div",{ref:k})]})})}),(0,i.tZ)(p.Z,{sx:{position:"sticky",bottom:0,zIndex:10,background:e.vars.palette.background.body,borderTop:"1px solid",borderTopColor:e.vars.palette.divider,p:{xs:1,md:2}},children:(0,i.tZ)(Q,{isDeveloper:"Developer"===f,disableSend:b,sendMessage:E})})]}),(0,i.tZ)(eu,{open:D,onClose:()=>w(!1)})]})}}},function(e){e.O(0,[762,156,728,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);